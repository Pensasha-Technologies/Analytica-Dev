<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragment2 :: head">
<!-- Custom styles for this template-->
<link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet" />
</head>

<body id="page-top">

	<!-- Page Wrapper -->
	<div id="wrapper">

		<!-- Sidebar -->
		<ul th:replace="fragments :: sidebar"></ul>
		<!-- End of Sidebar -->

		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Sidebar Toggle (Topbar) -->
				<button id="sidebarToggleTop"
					class="btn btn-link d-md-none rounded-circle mr-3">
					<i class="fa fa-bars"></i>
				</button>

				<nav aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item active" aria-current="page">Home</li>
					</ol>
				</nav>

				<!-- Begin Page Content -->
				<div class="container-fluid">

					<div class="d-flex justify-content-between">
						<section>
							<h3>[[${student.firstname}]]'s Fee Statements</h3>
						</section>

					</div>

					<div>

						<div class="alert alert-danger" th:if="${fail}" th:text="${fail}">
							Staff exists</div>

						<div class="alert alert-success" th:if="${success}"
							th:text="${success}">Staff saved</div>

						<div th:if="${form1FeeRecords} and ${form1FeeRecords.size()}">

							<h6 style="text-align: center;">Form One</h6>

							<div class="table-responsive">
								<table class="table" id="allSchools">
									<thead>
										<tr>
											<th scope="col">First Name</th>
											<th scope="col">Last Name</th>
											<th scope="col">Adm No.</th>
											<th scope="col">Date Paid</th>
											<th scope="col">Amount</th>
											<th></th>
											<th></th>
										</tr>
									</thead>
									<tbody id="allSchoolsTable">
										<th:block
											th:unless="${form1FeeRecords} and ${form1FeeRecords.size()}">
											<br>
											<p class="text text-center alert alert-warning">No Fee
												has been paid</p>
										</th:block>

										<tr th:each="feeRecord : ${form1FeeRecords}">

											<td th:text="${feeRecord.student.firstname}">Student
												first name</td>
											<td th:text="${feeRecord.student.thirdname}">Student
												third name</td>
											<td
												th:text="${#strings.substringAfter(feeRecord.student.admNo,'_')}">Student
												adm no.</td>
											<td th:text="${feeRecord.datePaid}">Date paid</td>
											<td th:text="'Ksh ' + ${feeRecord.amount} + '/-'">Amount</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statements/{id}(code=${school.code}, admNo = ${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-primary"> View </a>
												</div>
											</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statement/{id}(code=${school.code}, admNo=${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-danger"> Delete </a>
												</div>
											</td>
										</tr>
									</tbody>

									<th:block
										th:with="total = ${#aggregates.sum(form1FeeRecords.![amount])}, form = ${#aggregates.sum(feeStructure.?[form.form==1].![cost])}">
										<th:block>
											<tr>
												<th scope="col">Total</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${'Ksh ' + total + '/-'}">1000</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Fee Payable</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${ 'Ksh ' + form + '/-'}">KSh
													1000 /-</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Balance</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col">Ksh <span th:text="${form} - ${total}">1000</span>/-
												</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
									</th:block>
								</table>
							</div>
						</div>

						<div th:if="${form2FeeRecords} and ${form2FeeRecords.size()}">

							<h6 style="text-align: center;">Form Two</h6>

							<div class="table-responsive">
								<table class="table" id="allSchools">
									<thead>
										<tr>
											<th scope="col">First Name</th>
											<th scope="col">Last Name</th>
											<th scope="col">Adm No.</th>
											<th scope="col">Date Paid</th>
											<th scope="col">Amount</th>
											<th></th>
											<th></th>
										</tr>
									</thead>
									<tbody id="allSchoolsTable">
										<th:block
											th:unless="${form2FeeRecords} and ${form2FeeRecords.size()}">
											<br>
											<p class="text text-center alert alert-warning">No Fee
												has been paid</p>
										</th:block>

										<tr th:each="feeRecord : ${form2FeeRecords}">

											<td th:text="${feeRecord.student.firstname}">Student
												first name</td>
											<td th:text="${feeRecord.student.thirdname}">Student
												third name</td>
											<td
												th:text="${#strings.substringAfter(feeRecord.student.admNo,'_')}">Student
												adm no.</td>
											<td th:text="${feeRecord.datePaid}">Date paid</td>
											<td th:text="'Ksh ' + ${feeRecord.amount} + '/-'">Amount</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statements/{id}(code=${school.code}, admNo = ${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-primary"> View </a>
												</div>
											</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statement/{id}(code=${school.code}, admNo=${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-danger"> Delete </a>
												</div>
											</td>
										</tr>
									</tbody>

									<th:block
										th:with="total = ${#aggregates.sum(form2FeeRecords.![amount])}, form = ${#aggregates.sum(feeStructure.?[form.form==2].![cost])}">
										<th:block>
											<tr>
												<th scope="col">Total</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${'Ksh ' + total + '/-'}">1000</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Fee Payable</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${ 'Ksh ' + form + '/-'}">KSh
													1000 /-</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Balance</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col">Ksh <span th:text="${form} - ${total}">1000</span>/-
												</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
									</th:block>
								</table>
							</div>
						</div>

						<div th:if="${form3FeeRecords} and ${form3FeeRecords.size()}">

							<h6 style="text-align: center;">Form Three</h6>

							<div class="table-responsive">
								<table class="table" id="allSchools">
									<thead>
										<tr>
											<th scope="col">First Name</th>
											<th scope="col">Last Name</th>
											<th scope="col">Adm No.</th>
											<th scope="col">Date Paid</th>
											<th scope="col">Amount</th>
											<th></th>
											<th></th>
										</tr>
									</thead>
									<tbody id="allSchoolsTable">
										<th:block
											th:unless="${form3FeeRecords} and ${form3FeeRecords.size()}">
											<br>
											<p class="text text-center alert alert-warning">No Fee
												has been paid</p>
										</th:block>

										<tr th:each="feeRecord : ${form3FeeRecords}">

											<td th:text="${feeRecord.student.firstname}">Student
												first name</td>
											<td th:text="${feeRecord.student.thirdname}">Student
												third name</td>
											<td
												th:text="${#strings.substringAfter(feeRecord.student.admNo,'_')}">Student
												adm no.</td>
											<td th:text="${feeRecord.datePaid}">Date paid</td>
											<td th:text="'Ksh ' + ${feeRecord.amount} + '/-'">Amount</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statements/{id}(code=${school.code}, admNo = ${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-primary"> View </a>
												</div>
											</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statement/{id}(code=${school.code}, admNo=${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-danger"> Delete </a>
												</div>
											</td>
										</tr>
									</tbody>

									<th:block
										th:with="total = ${#aggregates.sum(form3FeeRecords.![amount])}, form = ${#aggregates.sum(feeStructure.?[form.form==3].![cost])}">
										<th:block>
											<tr>
												<th scope="col">Total</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${'Ksh ' + total + '/-'}">1000</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Fee Payable</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${ 'Ksh ' + form + '/-'}">KSh
													1000 /-</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Balance</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col">Ksh <span th:text="${form} - ${total}">1000</span>/-
												</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
									</th:block>
								</table>
							</div>
						</div>

						<div th:if="${form4FeeRecords} and ${form4FeeRecords.size()}">

							<h6 style="text-align: center;">Form Four</h6>

							<div class="table-responsive">
								<table class="table" id="allSchools">
									<thead>
										<tr>
											<th scope="col">First Name</th>
											<th scope="col">Last Name</th>
											<th scope="col">Adm No.</th>
											<th scope="col">Date Paid</th>
											<th scope="col">Amount</th>
											<th></th>
											<th></th>
										</tr>
									</thead>
									<tbody id="allSchoolsTable">
										<th:block
											th:unless="${form4FeeRecords} and ${form4FeeRecords.size()}">
											<br>
											<p class="text text-center alert alert-warning">No Fee
												has been paid</p>
										</th:block>

										<tr th:each="feeRecord : ${form4FeeRecords}">

											<td th:text="${feeRecord.student.firstname}">Student
												first name</td>
											<td th:text="${feeRecord.student.thirdname}">Student
												third name</td>
											<td
												th:text="${#strings.substringAfter(feeRecord.student.admNo,'_')}">Student
												adm no.</td>
											<td th:text="${feeRecord.datePaid}">Date paid</td>
											<td th:text="'Ksh ' + ${feeRecord.amount} + '/-'">Amount</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statements/{id}(code=${school.code}, admNo = ${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-primary"> View </a>
												</div>
											</td>
											<td>
												<div class="d-flex justify-content-center">
													<a
														th:href="@{/schools/{code}/students/{admNo}/statement/{id}(code=${school.code}, admNo=${feeRecord.student.admNo},id=${feeRecord.id})}"
														class="btn btn-danger"> Delete </a>
												</div>
											</td>
										</tr>
									</tbody>

									<th:block
										th:with="total = ${#aggregates.sum(form4FeeRecords.![amount])}, form = ${#aggregates.sum(feeStructure.?[form.form==4].![cost])}">
										<th:block>
											<tr>
												<th scope="col">Total</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${'Ksh ' + total + '/-'}">1000</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Fee Payable</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col" th:text="${ 'Ksh ' + form + '/-'}">KSh
													1000 /-</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
										<th:block>
											<tr>
												<th scope="col">Balance</th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col"></th>
												<th scope="col">Ksh <span th:text="${form} - ${total}">1000</span>/-
												</th>
												<th></th>
												<th></th>
											</tr>
										</th:block>
									</th:block>
								</table>
							</div>
						</div>

					</div>

				</div>
				<!-- /.container-fluid -->

			</div>
			<!-- End of Main Content -->

			<!-- Footer -->
			<footer th:replace="fragments :: footer2"></footer>
			<!-- End of Footer -->

		</div>
		<!-- End of Content Wrapper -->

	</div>
	<!-- End of Page Wrapper -->

	<!-- Scroll to Top Button-->
	<a th:replace="fragments :: scroll"></a>

	<!-- Logout modal -->
	<div th:replace="fragments :: logoutModal"></div>

	<div th:replace="fragments :: endScript"></div>

</body>

</html>
